# 事件期货可行性分析 Agent

基于 LangGraph 构建的事件期货可行性分析系统，用于判断某个现实世界事件是否具备被金融化、标准化、并以"事件期货"形式上市交易的可行性。

## 系统目标

- **输入**: 自然语言话题 (topic)
- **输出**: 一份结构化《事件期货可行性报告》

## 什么是事件期货可行性报告？

事件期货可行性报告是一套帮助判断"一个新闻事件能不能做成期货交易"的分析框架。它检查三个关键点：
1. 能不能量化
2. 能不能可靠结算
3. 有没有人愿意交易

## 工作流架构

```
                    ┌─────────────────┐
                    │  EventGrounding │  ← 输入: topic (事件话题)
                    │   (事件解析)     │
                    └────────┬────────┘
                             │
         ┌───────────────────┼───────────────────┐
         │                   │                   │
         ▼                   ▼                   ▼
┌────────────────┐ ┌────────────────┐ ┌────────────────┐ ┌────────────────┐
│Quantifiability │ │   Oracle       │ │ MarketDemand   │ │ ComplianceRisk │
│   Analyzer     │ │   Analyzer     │ │   Analyzer     │ │   Analyzer     │
│  (可量化性)     │ │  (预言机)      │ │  (市场需求)     │ │  (合规风险)     │
└───────┬────────┘ └───────┬────────┘ └───────┬────────┘ └───────┬────────┘
        │                   │                   │                  │
        └───────────────────┴─────────┬─────────┴──────────────────┘
                                      ▼
                           ┌─────────────────┐
                           │    Collector    │
                           └────────┬────────┘
                                    ▼
                           ┌─────────────────┐
                           │     Curator     │
                           └────────┬────────┘
                                    ▼
                           ┌─────────────────┐
                           │    Enricher     │
                           └────────┬────────┘
                                    ▼
                           ┌─────────────────┐
                           │    Briefing     │
                           └────────┬────────┘
                                    ▼
                           ┌─────────────────┐
                           │     Editor      │  ← 输出: 可行性报告 + 综合评分
                           └─────────────────┘
```

## 分析维度

| 分析器 | 职责 |
|--------|------|
| **Quantifiability** | 可量化性评估：事件能否被严格定义和量化 |
| **Oracle** | 预言机分析：可信数据源和结算机制评估 |
| **MarketDemand** | 市场需求分析：交易者兴趣和合约设计建议 |
| **ComplianceRisk** | 合规风险分析：法律、伦理和操纵风险评估 |

## 报告输出结构

```markdown
# {topic} 事件期货可行性报告

## 事件概述
## 可量化性评估 (评分: X/10)
## 预言机与结算机制 (评分: X/10)
## 市场需求分析 (评分: X/10)
## 合规与风险评估 (评分: X/10)
## 综合结论
  - 可行性总评分
  - 推荐决策: 推荐上线 / 谨慎上线 / 不推荐
  - 风险点汇总
  - 优化建议
## 参考资料
```

## 技术栈

- **编排框架**: LangGraph (StateGraph)
- **搜索/爬取**: Tavily API
- **LLM**: GPT-4o (通过 LangChain)
- **状态管理**: TypedDict (InputState/ResearchState)

## 安装

```bash
pip install -r requirements.txt
```

## 环境变量

```bash
export OPENAI_API_KEY="your-openai-api-key"
export TAVILY_API_KEY="your-tavily-api-key"
```

## 使用示例

```python
from workflow.backend.graph import Graph

# 创建分析任务
graph = Graph(
    topic="2024年美联储降息",
    event_category="经济",
    target_date="2024-12-31"
)

# 运行分析
async for state in graph.run({"configurable": {"thread_id": "1"}}):
    print(state)
```