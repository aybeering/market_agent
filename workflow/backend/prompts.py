"""
Centralized prompts for the Event Futures Feasibility Analysis Agent.
All LLM prompts are defined here for easy maintenance and updates.
"""

# ============================================================================
# BRIEFING PROMPTS - 各维度简报生成
# ============================================================================

QUANTIFIABILITY_BRIEFING_PROMPT = """为事件"{topic}"创建一份可量化性评估简报。
事件类别: {event_category}
预期结算日期: {target_date}

核心要求:
1. 结构使用以下标题和要点:

### 事件定义
* 事件的严格描述是什么
* 事件的边界条件是什么
* 事件是否存在歧义

### 量化标准
* 判断标准是什么 (发生/未发生 或 具体数值)
* 可量化的指标有哪些
* 指标的精确度如何

### 判定条件
* 事件结果类型: 二元(Yes/No) 还是 连续数值
* 是否存在多种可能的结果
* 边界情况如何处理

### 可量化性评分
* 综合评估该事件的可量化程度 (1-10分)
* 主要优势
* 主要挑战

2. 每个要点必须是单一、完整的事实
3. 不要提及"未找到信息"
4. 只使用要点格式，不使用段落
5. 只提供简报内容，不要解释或评论"""

ORACLE_BRIEFING_PROMPT = """为事件"{topic}"创建一份预言机与结算机制评估简报。
事件类别: {event_category}
预期结算日期: {target_date}

核心要求:
1. 结构使用以下标题和要点:

### 可信数据源
* 官方数据源有哪些 (政府机构、监管部门等)
* 第三方权威数据源有哪些
* 数据源的可靠性评估

### 结算时间表
* 事件结果何时公布
* 结算延迟风险有多大
* 是否存在时区/时间歧义

### 结算可靠性
* 数据是否可能被篡改或争议
* 历史上类似事件的结算情况
* 异常情况的处理机制

### 预言机评分
* 综合评估结算机制可靠性 (1-10分)
* 推荐的数据源
* 潜在风险点

2. 每个要点必须是单一、完整的事实
3. 不要提及"未找到信息"
4. 只使用要点格式
5. 只提供简报内容"""

MARKET_DEMAND_BRIEFING_PROMPT = """为事件"{topic}"创建一份市场需求与合约设计简报。
事件类别: {event_category}
预期结算日期: {target_date}

核心要求:
1. 结构使用以下标题和要点:

### 市场关注度
* 该事件的公众关注程度
* 媒体报道密度
* 社交媒体讨论热度

### 交易者兴趣
* 谁会想交易这个事件 (对冲者/投机者/机构)
* 类似事件在预测市场的交易量
* 潜在的交易动机

### 合约类型建议
* 推荐二元合约(Yes/No)还是指数型合约
* 建议的价格区间
* 建议的到期日设置

### 类似合约参考
* 历史上类似的预测市场合约
* 这些合约的表现如何
* 可借鉴的设计要点

### 市场需求评分
* 综合评估市场需求程度 (1-10分)
* 市场优势
* 市场风险

2. 每个要点必须是单一、完整的事实
3. 只使用要点格式
5. 只提供简报内容"""

COMPLIANCE_RISK_BRIEFING_PROMPT = """为事件"{topic}"创建一份合规与风险评估简报。
事件类别: {event_category}
预期结算日期: {target_date}

核心要求:
1. 结构使用以下标题和要点:

### 法律合规性
* 在主要司法管辖区(美国、欧盟、中国)的法律状态
* 是否需要特定牌照或许可
* 监管机构的态度

### 伦理敏感性
* 是否涉及生命安全
* 是否涉及政治敏感话题
* 是否可能引发道德争议

### 操纵风险
* 事件结果是否可能被人为影响
* 内幕信息的风险有多大
* 市场操纵的可能性

### 声誉风险
* 上线此合约对平台声誉的影响
* 公众反应预测
* 媒体风险评估

### 合规风险评分
* 综合合规风险评估 (1-10分，10为最安全)
* 主要风险点
* 风险缓解建议

2. 每个要点必须是单一、完整的事实
3. 只使用要点格式
4. 只提供简报内容"""

BRIEFING_ANALYSIS_INSTRUCTION = """分析以下文档并提取关键信息，只提供简报，不要解释或评论:"""


# ============================================================================
# EDITOR PROMPTS - 最终报告编译
# ============================================================================

EDITOR_SYSTEM_MESSAGE = "你是一位专业的事件期货可行性分析专家，负责将各维度研究简报编译成综合可行性报告。"

COMPILE_CONTENT_PROMPT = """你正在编译关于"{topic}"的事件期货可行性报告。

已编译的各维度简报:
{combined_content}

基于以上内容，创建一份深入、全面的事件期货可行性报告:

1. 整合所有维度的信息形成连贯的分析叙述
2. 保留每个维度的重要细节
3. 逻辑组织信息，去除过渡性评论
4. 使用清晰的章节标题和结构
5. 在最后给出综合评分和明确建议

严格执行以下文档结构:

# {topic} 事件期货可行性报告

## 事件概述
[事件背景、定义、时间范围的简要描述]

## 可量化性评估
[可量化性内容，使用 ### 子标题]
**维度评分: X/10**

## 预言机与结算机制
[预言机内容，使用 ### 子标题]
**维度评分: X/10**

## 市场需求分析
[市场需求内容，使用 ### 子标题]
**维度评分: X/10**

## 合规与风险评估
[合规风险内容，使用 ### 子标题]
**维度评分: X/10**

## 综合结论
### 可行性总评分
[基于四个维度的加权评分，给出 1-10 分]

### 推荐决策
[明确给出: 推荐上线 / 谨慎上线(需附加条件) / 不推荐上线]

### 风险点汇总
[列出主要风险点]

### 优化建议
[如何改进合约设计以提高可行性]

返回 Markdown 格式的报告。不要解释或评论。"""

CONTENT_SWEEP_SYSTEM_MESSAGE = "你是一位专业的 Markdown 格式化专家，确保文档结构一致。"

CONTENT_SWEEP_PROMPT = """你是一位专业的可行性报告编辑。这是一份关于"{topic}"的事件期货可行性报告。

当前报告:
{content}

1. 删除冗余或重复信息
2. 删除与"{topic}"无关的信息
3. 删除缺乏实质内容的章节
4. 删除任何元评论 (如"以下是报告...")

严格执行以下文档结构:

## 事件概述
[事件内容]

## 可量化性评估
[可量化性内容，使用 ### 子标题]

## 预言机与结算机制
[预言机内容，使用 ### 子标题]

## 市场需求分析
[市场需求内容，使用 ### 子标题]

## 合规与风险评估
[合规风险内容，使用 ### 子标题]

## 综合结论
[结论内容，使用 ### 子标题]

## 参考资料
[保持 MLA 格式的参考文献 - 完全保留]

关键规则:
1. 文档必须以 "# {topic} 事件期货可行性报告" 开头
2. 文档只能使用以上 ## 标题，按此顺序
3. 不允许使用其他 ## 标题
4. 使用 ### 作为子标题
5. 不要使用代码块 (```)
6. 章节之间不要超过一个空行
7. 所有要点使用 * 格式
8. 不要修改参考资料章节的格式

返回格式完美的 Markdown 报告。不要解释。"""


# ============================================================================
# RESEARCH QUERY GENERATION PROMPTS - 搜索查询生成
# ============================================================================

QUANTIFIABILITY_QUERY_PROMPT = """针对事件"{topic}"生成可量化性分析的搜索查询:
- 事件的官方定义和标准
- 事件的判断标准和指标
- 类似事件的量化案例
- 事件结果的可能类型
"""

ORACLE_QUERY_PROMPT = """针对事件"{topic}"生成预言机与结算机制的搜索查询:
- 官方数据发布渠道和机构
- 历史数据发布的时间和可靠性
- 第三方验证数据源
- 争议解决机制
"""

MARKET_DEMAND_QUERY_PROMPT = """针对事件"{topic}"生成市场需求分析的搜索查询:
- 预测市场上类似事件的交易量
- 公众对该事件的关注度
- 投资者/交易者对该事件的兴趣
- Polymarket Kalshi PredictIt 类似合约
"""

COMPLIANCE_RISK_QUERY_PROMPT = """针对事件"{topic}"生成合规风险分析的搜索查询:
- 该类事件在预测市场的法律状态
- 监管机构对类似合约的态度
- 伦理争议和公众反应
- 市场操纵和内幕交易风险
"""

QUERY_FORMAT_GUIDELINES = """
重要指南:
- 只关注与"{topic}"直接相关的信息
- 查询要简洁明了
- 提供恰好 4 条搜索查询 (每行一条)，不使用连字符或破折号
- 不要假设事件细节，只使用提供的信息"""
